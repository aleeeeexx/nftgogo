(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CustomerDetail"],{"0193":function(e,t,c){e.exports=c.p+"img/location.bd8df447.svg"},"159b":function(e,t,c){var o=c("da84"),n=c("fdbc"),r=c("17c2"),l=c("9112");for(var a in n){var i=o[a],s=i&&i.prototype;if(s&&s.forEach!==r)try{l(s,"forEach",r)}catch(u){s.forEach=r}}},"17c2":function(e,t,c){"use strict";var o=c("b727").forEach,n=c("a640"),r=n("forEach");e.exports=r?[].forEach:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}},"19c6":function(e,t,c){},"1b59":function(e,t,c){},"280c":function(e,t,c){"use strict";c("9553")},"379a":function(e,t,c){e.exports=c.p+"img/source.060e0539.svg"},"380d":function(e,t,c){e.exports=c.p+"img/mobile.193ada76.svg"},"3b6a":function(e,t,c){},"3c04":function(e,t,c){e.exports=c.p+"img/add_house_grey.53293c13.svg"},"3e82":function(e,t,c){e.exports=c.p+"img/bar_reassign.f7b7a922.svg"},"4aca":function(e,t,c){"use strict";c("3b6a")},"4de4":function(e,t,c){"use strict";var o=c("23e7"),n=c("b727").filter,r=c("1dde"),l=r("filter");o({target:"Array",proto:!0,forced:!l},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,c){"use strict";var o=c("0366"),n=c("7b0b"),r=c("9bdd"),l=c("e95a"),a=c("50c4"),i=c("8418"),s=c("35a1");e.exports=function(e){var t,c,u,d,b,m,f=n(e),O="function"==typeof this?this:Array,j=arguments.length,p=j>1?arguments[1]:void 0,v=void 0!==p,g=s(f),y=0;if(v&&(p=o(p,j>2?arguments[2]:void 0,2)),void 0==g||O==Array&&l(g))for(t=a(f.length),c=new O(t);t>y;y++)m=v?p(f[y],y):f[y],i(c,y,m);else for(d=g.call(f),b=d.next,c=new O;!(u=b.call(d)).done;y++)m=v?r(d,p,[u.value,y],!0):u.value,i(c,y,m);return c.length=y,c}},"5be3":function(e,t,c){"use strict";c("19c6")},"5de2":function(e,t,c){"use strict";c("8eca")},"5f3e":function(e,t,c){"use strict";c("1b59")},6062:function(e,t,c){"use strict";var o=c("6d61"),n=c("6566");e.exports=o("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n)},6582:function(e,t,c){e.exports=c.p+"img/edit.9d69423e.svg"},6710:function(e,t,c){e.exports=c.p+"img/bar_tip.7bd0711a.svg"},"69c7":function(e,t,c){},"6a22":function(e,t,c){e.exports=c.p+"img/help.792916dd.svg"},"6b56":function(e,t,c){e.exports=c.p+"img/bar_quotation.eb11b08a.svg"},"6ee1":function(e,t,c){e.exports=c.p+"img/person.84ce544b.svg"},"71ef":function(e,t,c){"use strict";c("8ac0")},7936:function(e,t,c){e.exports=c.p+"img/bar_close_grey.d6ffc177.svg"},"7aef":function(e,t,c){e.exports=c.p+"img/add_house.dfaf6ad8.svg"},"7db0":function(e,t,c){"use strict";var o=c("23e7"),n=c("b727").find,r=c("44d2"),l="find",a=!0;l in[]&&Array(1)[l]((function(){a=!1})),o({target:"Array",proto:!0,forced:a},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),r(l)},8617:function(e,t,c){e.exports=c.p+"img/house.1a45e0ff.svg"},"87a7":function(e,t,c){e.exports=c.p+"img/supplier.22ad3db7.svg"},"88a9":function(e,t,c){e.exports=c.p+"img/share.57b6aee9.svg"},"8ac0":function(e,t,c){},"8cf8":function(e,t,c){"use strict";c("69c7")},"8eca":function(e,t,c){},9204:function(e,t,c){e.exports=c.p+"img/bar_close.f3bcfb59.svg"},9553:function(e,t,c){},"9a64":function(e,t,c){e.exports=c.p+"img/bar_quotation_grey.b6030f1f.svg"},"9bdd":function(e,t,c){var o=c("825a"),n=c("2a62");e.exports=function(e,t,c,r){try{return r?t(o(c)[0],c[1]):t(c)}catch(l){throw n(e),l}}},"9e53":function(e,t,c){e.exports=c.p+"img/bar_forward.7c73d009.svg"},a434:function(e,t,c){"use strict";var o=c("23e7"),n=c("23cb"),r=c("a691"),l=c("50c4"),a=c("7b0b"),i=c("65f0"),s=c("8418"),u=c("1dde"),d=u("splice"),b=Math.max,m=Math.min,f=9007199254740991,O="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!d},{splice:function(e,t){var c,o,u,d,j,p,v=a(this),g=l(v.length),y=n(e,g),k=arguments.length;if(0===k?c=o=0:1===k?(c=0,o=g-y):(c=k-2,o=m(b(r(t),0),g-y)),g+c-o>f)throw TypeError(O);for(u=i(v,o),d=0;d<o;d++)j=y+d,j in v&&s(u,d,v[j]);if(u.length=o,c<o){for(d=y;d<g-o;d++)j=d+o,p=d+c,j in v?v[p]=v[j]:delete v[p];for(d=g;d>g-o+c;d--)delete v[d-1]}else if(c>o)for(d=g-o;d>y;d--)j=d+o-1,p=d+c-1,j in v?v[p]=v[j]:delete v[p];for(d=0;d<c;d++)v[d+y]=arguments[d+2];return v.length=g-o+c,u}})},a630:function(e,t,c){var o=c("23e7"),n=c("4df4"),r=c("1c7e"),l=!r((function(e){Array.from(e)}));o({target:"Array",stat:!0,forced:l},{from:n})},ab8d:function(e,t,c){e.exports=c.p+"img/follow_history.ba4c6880.svg"},b203:function(e,t,c){e.exports=c.p+"img/time.2a4b1333.svg"},ba24:function(e,t,c){"use strict";var o=c("7a23"),n=c("3d1b");Object(o["pushScopeId"])("data-v-500f241d");var r={class:"order-card"},l={class:"card-title"},a=["src"],i={class:"name"},s={class:"price"},u={class:"card-detail"},d={class:"detail-item"},b=Object(o["createElementVNode"])("span",{class:"item-label"},"商品类目：",-1),m={class:"item-val"},f={class:"detail-item"},O=Object(o["createElementVNode"])("span",{class:"item-label"},"订单状态：",-1),j={class:"item-val"},p={class:"detail-item"},v=Object(o["createElementVNode"])("span",{class:"item-label"},"下单时间：",-1),g={class:"item-val"},y={class:"card-btns"};Object(o["popScopeId"])();var k=Object(o["defineComponent"])({props:{item:{type:Object,required:!0}},setup:function(e){return function(t,k){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",r,[Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("span",null,[Object(o["createElementVNode"])("img",{src:c("87a7")},null,8,a),Object(o["createElementVNode"])("span",i,Object(o["toDisplayString"])(e.item.supplierName),1)]),Object(o["createElementVNode"])("span",s,Object(o["toDisplayString"])("￥"+(e.item.totalAmount||"")),1)]),Object(o["createElementVNode"])("div",u,[Object(o["createElementVNode"])("div",d,[b,Object(o["createElementVNode"])("span",m,Object(o["toDisplayString"])(e.item.category),1)]),Object(o["createElementVNode"])("div",f,[O,Object(o["createElementVNode"])("span",j,Object(o["toDisplayString"])(Object(o["unref"])(n["c"])[+e.item.orderStatus]),1)]),Object(o["createElementVNode"])("div",p,[v,Object(o["createElementVNode"])("span",g,Object(o["toDisplayString"])(e.item.createdTime),1)])]),Object(o["createElementVNode"])("div",y,[Object(o["renderSlot"])(t.$slots,"default")])])}}});c("5f3e");k.__scopeId="data-v-500f241d";t["a"]=k},d2b0:function(e,t,c){"use strict";c.r(t);c("a9e3"),c("7db0"),c("d81d"),c("159b"),c("4de4");var o=c("9ab4"),n=c("7a23"),r=c("ebef"),l=(c("b0c0"),c("caad"),c("fb6a"),c("626a")),a=c("3d1b");Object(n["pushScopeId"])("data-v-75854fce");var i={class:"detail-basic"},s={class:"card-title flex-row"},u={class:"left"},d=["src"],b={key:1,class:"middle"},m={class:"card-subtitle"},f=["src"],O={class:"card-desc"},j={class:"card-detail flex-row-start"},p=["src"],v=Object(n["createElementVNode"])("span",{class:"label"},"意向描述：",-1),g={class:"val"},y={key:0,class:"card-detail flex-row-start"},k=Object(n["createElementVNode"])("span",{class:"icon"},null,-1),h=Object(n["createElementVNode"])("span",{class:"label"},"意向类型：",-1),N={key:0,class:"val mr"},E={class:"card-detail"},V=["src"],w=Object(n["createElementVNode"])("span",{class:"label"},"客户来源：",-1),C={class:"val"},B={class:"card-detail flex-row-start"},S=["src"],x=Object(n["createElementVNode"])("span",{class:"label"},"转 介 人：",-1),I={class:"val"},T={class:"card-detail flex-row-start"},F=["src"],D=Object(n["createElementVNode"])("span",{class:"label"},"转介时间：",-1),_={class:"val"},L={key:0,class:"card-bottom flex-between"},q={class:"flex-row"},A={key:1,class:"edit"},M=["src"],Z=["src"],U=Object(n["createElementVNode"])("span",{class:"edit"},"编辑标签",-1),z={class:"dialog-content"};Object(n["popScopeId"])();var J=Object(n["defineComponent"])({props:{customer:{type:Object,required:!0},referral:{type:Object,required:!0},pageType:{type:Number,required:!0},role:{type:String,required:!0},intentionConfig:{type:Object,required:!0},intentionList:{type:Array,required:!0}},emits:["showWarn","success","updateType"],setup:function(e,t){var J=this,R=t.emit,K=e,W=Object(n["computed"])((function(){return K.intentionList.map((function(e){return{text:e.text+"（"+e.desc+"）",value:e.value}}))})),Y=[{text:"自营",value:1},{text:"美居",value:2}],X=Object(n["ref"])(!1),H=Object(n["ref"])(!1),P=Object(n["ref"])(!1),$=function(e){1===K.referral.status&&1===K.referral.locked?R("showWarn"):1===e?H.value=!0:P.value=!0},Q=function(e){return Object(o["b"])(J,void 0,void 0,(function(){return Object(o["c"])(this,(function(t){switch(t.label){case 0:return console.log(e),[4,Object(r["z"])(Object(o["a"])({markValueArray:[e.value],businessId:K.referral.id},K.intentionConfig))];case 1:return t.sent(),R("success"),l["a"].success("操作成功"),H.value=!1,[2]}}))}))},G=function(e){return Object(o["b"])(J,void 0,void 0,(function(){return Object(o["c"])(this,(function(t){switch(t.label){case 0:return[4,Object(r["C"])({id:K.referral.id,intentionType:e.value})];case 1:return t.sent(),R("updateType",e.value),l["a"].success("操作成功"),P.value=!1,[2]}}))}))};return function(t,o){var r,l,J=Object(n["resolveComponent"])("van-dialog"),R=Object(n["resolveComponent"])("van-picker"),K=Object(n["resolveComponent"])("van-popup");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("div",i,[Object(n["withDirectives"])(Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])(["status","status-"+(0===e.pageType?"green":1===e.pageType?"blue":"grey")])},Object(n["toDisplayString"])(0===e.pageType?"可跟进":1===e.pageType?"跟进中"+(2===e.referral.locked?"-待复核":""):3===e.pageType?"已成交":"无意向"),3),[[n["vShow"],e.pageType]]),Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("div",u,Object(n["toDisplayString"])(e.customer.name),1),[0,1].includes(e.pageType)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",{key:0,class:"icon",src:c("380d")},null,8,d)):Object(n["createCommentVNode"])("",!0),[0,1].includes(e.pageType)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",b,Object(n["toDisplayString"])(e.customer.mobile),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("span",m,[Object(n["createElementVNode"])("img",{class:"location",src:c("0193")},null,8,f),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.customer.provinceName)+Object(n["toDisplayString"])(e.customer.cityName),1)]),Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("div",j,[Object(n["createElementVNode"])("img",{class:"icon",src:c("ce51")},null,8,p),v,Object(n["createElementVNode"])("span",g,Object(n["toDisplayString"])(e.referral.intentionDescription),1)]),e.referral.intentionType||!0===e.customer.followFlag&&2!==e.referral.locked?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",y,[k,h,e.referral.intentionType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",N,Object(n["toDisplayString"])(null===(r=Y.find((function(t){return t.value===e.referral.intentionType})))||void 0===r?void 0:r.text),1)):Object(n["createCommentVNode"])("",!0),!0===e.customer.followFlag&&0===e.pageType&&["MJFZ_ZYKF"].includes(e.role)||!0===e.customer.followFlag&&1===e.pageType&&!e.referral.intentionType&&2!==e.referral.locked?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:1,class:"btn fold-down",onClick:o[0]||(o[0]=function(e){return $(2)})}," 请选择 ")):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",E,[Object(n["createElementVNode"])("img",{class:"icon",src:c("379a")},null,8,V),w,Object(n["createElementVNode"])("span",C,Object(n["toDisplayString"])(Object(n["unref"])(a["b"])[e.referral.customerSource]),1)]),Object(n["createElementVNode"])("div",B,[Object(n["createElementVNode"])("img",{class:"icon",src:c("6ee1")},null,8,S),x,Object(n["createElementVNode"])("span",I,Object(n["toDisplayString"])(e.referral.referrerName)+" "+Object(n["toDisplayString"])(e.referral.referrerMobile),1)]),Object(n["createElementVNode"])("div",T,[Object(n["createElementVNode"])("img",{class:"icon",src:c("b203")},null,8,F),D,Object(n["createElementVNode"])("span",_,Object(n["toDisplayString"])(e.referral.createdTime),1)])]),1===e.pageType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",L,[Object(n["createElementVNode"])("span",q,[e.referral.intentionLevel?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:Object(n["normalizeClass"])(["tag","tag-"+(null===(l=e.referral.intentionLevel)||void 0===l?void 0:l.slice(0,1))])},Object(n["toDisplayString"])(e.referral.intentionLevel),3)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",A,"暂无意向标签，请添加")),Object(n["createElementVNode"])("img",{class:"icon",src:c("6a22"),onClick:o[1]||(o[1]=function(e){return X.value=!0})},null,8,M)]),!0===e.customer.followFlag&&2!==e.referral.locked?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"flex-row",onClick:o[2]||(o[2]=Object(n["withModifiers"])((function(e){return $(1)}),["stop"]))},[Object(n["createElementVNode"])("img",{class:"icon",src:c("6582")},null,8,Z),U])):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])(J,{show:X.value,"onUpdate:show":o[3]||(o[3]=function(e){return X.value=e}),title:"意向标签定义",confirmButtonText:"我知道了",confirmButtonColor:"#5D8AA3"},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",z,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.intentionList,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("p",{key:e.value},Object(n["toDisplayString"])(e.value+"："+e.desc),1)})),128))])]})),_:1},8,["show"]),Object(n["createVNode"])(K,{show:H.value,"onUpdate:show":o[4]||(o[4]=function(e){return H.value=e}),round:"",position:"bottom"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(R,{"cancel-button-text":"",title:"编辑意向标签",columns:Object(n["unref"])(W),onConfirm:Q},null,8,["columns"])]})),_:1},8,["show"]),Object(n["createVNode"])(K,{show:P.value,"onUpdate:show":o[5]||(o[5]=function(e){return P.value=e}),round:"",position:"bottom"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(R,{"cancel-button-text":"",title:"请选择意向类型",columns:Y,onConfirm:G})]})),_:1},8,["show"])],64)}}});c("280c");J.__scopeId="data-v-75854fce";var R=J,K=c("d484"),W=(c("a434"),c("2532"),c("fab1"));Object(n["pushScopeId"])("data-v-076926c5");var Y={class:"detail-follow"},X={key:0},H=["onClick"],P=["src"],$=Object(n["createElementVNode"])("span",null,"当前跟进单",-1),Q=["onClick"],G=["src"],ee={class:"follow-tag"},te={class:"follow-tag-edit"},ce=Object(n["createElementVNode"])("span",{class:"text-label"},"跟进标签：",-1),oe={key:0},ne=["onClick"],re={key:0},le={class:"steps-container"},ae=Object(n["createElementVNode"])("span",{class:"text-label"},"跟进详情",-1),ie=Object(n["createElementVNode"])("div",{class:"title"},"客户订单完成",-1),se={class:"level-black-1"},ue=Object(n["createElementVNode"])("span",{class:"label"},"订单编号",-1),de={class:"val"},be={class:"level-black-1"},me=Object(n["createElementVNode"])("span",{class:"label"},"商品品类",-1),fe={class:"val"},Oe={class:"level-black-1"},je=Object(n["createElementVNode"])("span",{class:"label"},"付款时间",-1),pe={class:"val"},ve={class:"level-black-2"},ge={class:"label"},ye={class:"title"},ke={class:"level-grey"},he={class:"follow-picker"},Ne=Object(n["createTextVNode"])(" 编辑跟进标签 "),Ee={class:"content save-area"},Ve=Object(n["createElementVNode"])("div",{class:"content-title"},"跟进标签（可多选）",-1),we={class:"content-tags"},Ce=["onClick"];Object(n["popScopeId"])();var Be=Object(n["defineComponent"])({props:{pageType:Number,role:String,records:{type:Array,required:!0},followConfig:{type:Object,required:!0},followList:{type:Array,required:!0},customerId:{type:String,required:!0},followFlag:{type:Boolean,default:!1},referral:{type:Object,required:!0}},emits:["showWarn","success"],setup:function(e,t){var l=this,a=t.emit,i=e,s=Object(n["ref"])(!1),u=function(e){s.value=e},d=Object(n["ref"])(!1),b=Object(n["ref"])(0),m=Object(n["ref"])([]),f=function(e,t){1===i.referral.status&&1===i.referral.locked?a("showWarn"):(d.value=!0,b.value=e,m.value=Object(o["d"])([],t)||[])},O=function(e){var t=m.value.indexOf(e);t>-1?m.value.splice(t,1):m.value.push(e)},j=function(){return Object(o["b"])(l,void 0,void 0,(function(){return Object(o["c"])(this,(function(e){switch(e.label){case 0:return[4,Object(r["x"])(Object(o["a"])({markValueArray:m.value,businessId:b.value},i.followConfig))];case 1:return e.sent(),a("success"),d.value=!1,[2]}}))}))};return function(t,o){var r=Object(n["resolveComponent"])("van-popup");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Y,[1===e.records.length&&e.records[0].recordList.length>0||e.records.length>1?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",X,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.records,(function(t,o){return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:t.id,class:"follow-card"},[0===o&&t.recordList.length>0&&1===e.pageType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:Object(n["normalizeClass"])(["follow-title",{"fold-up":!t.fold,"fold-down":t.fold}]),onClick:function(e){return t.fold=!t.fold}},[Object(n["createElementVNode"])("img",{src:c("f6e4")},null,8,P),$],10,H)):Object(n["createCommentVNode"])("",!0),0!==o&&t.recordList.length>0||1!==e.pageType&&t.recordList.length>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:1,class:Object(n["normalizeClass"])(["follow-title",{"fold-up":!t.fold,"fold-down":t.fold}]),onClick:function(e){return t.fold=!t.fold}},[Object(n["createElementVNode"])("img",{src:c("ab8d")},null,8,G),Object(n["createElementVNode"])("span",null,"历史跟进："+Object(n["toDisplayString"])(t.followerName)+" "+Object(n["toDisplayString"])(t.followerMobile),1)],10,Q)):Object(n["createCommentVNode"])("",!0),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",ee,[Object(n["createElementVNode"])("div",te,[Object(n["createElementVNode"])("div",null,[ce,t.followUpTagArray&&t.followUpTagArray.length?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",oe,"暂无"))]),1===e.pageType&&0===o&&!0===e.followFlag&&2!==e.referral.locked?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"btn",onClick:function(e){return f(t.id,t.followUpTagArray)}}," 编辑 ",8,ne)):Object(n["createCommentVNode"])("",!0)]),t.followUpTagArray&&t.followUpTagArray.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",re,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t.followUpTagArray,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{class:"tag",key:e},Object(n["toDisplayString"])(e),1)})),128))])):Object(n["createCommentVNode"])("",!0)],512),[[n["vShow"],!t.fold]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",le,[ae,(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t.recordList,(function(t,c){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:t.recordId},[t.orderInfo?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:Object(n["normalizeClass"])(["steps-item normal info-form-label-val",{active:0===o&&0===c&&1===e.pageType}])},[ie,Object(n["createElementVNode"])("div",se,[ue,Object(n["createElementVNode"])("span",de,Object(n["toDisplayString"])(t.orderInfo.code),1)]),Object(n["createElementVNode"])("div",be,[me,Object(n["createElementVNode"])("span",fe,Object(n["toDisplayString"])(t.orderInfo.categoryName),1)]),Object(n["createElementVNode"])("div",Oe,[je,Object(n["createElementVNode"])("span",pe,Object(n["toDisplayString"])(t.orderInfo.finishPaidTime),1)]),Object(n["createElementVNode"])("div",ve,[Object(n["createElementVNode"])("span",ge,Object(n["toDisplayString"])(t.createdTime),1)])],2)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:1,class:Object(n["normalizeClass"])(["steps-item normal info-form-label-val",{active:0===o&&0===c&&1===e.pageType}])},[Object(n["createElementVNode"])("div",ye,Object(n["toDisplayString"])(t.content),1),Object(n["createElementVNode"])("div",ke,Object(n["toDisplayString"])(t.createdTime),1)],2))],64)})),128))],512),[[n["vShow"],!t.fold]])],512)),[[n["vShow"],s.value||0===o]])})),128)),e.records.length>1?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:"show-btn save-area",onClick:o[0]||(o[0]=function(e){return u(!s.value)})},[Object(n["createElementVNode"])("span",{class:Object(n["normalizeClass"])([s.value?"fold-up":"fold-down"])},Object(n["toDisplayString"])((s.value?"收起":"展开")+(1===e.pageType?"":"更多")+"历史跟进"),3)])):Object(n["createCommentVNode"])("",!0)])):(Object(n["openBlock"])(),Object(n["createBlock"])(W["a"],{key:1,text:"暂无跟进记录"})),Object(n["createVNode"])(r,{show:d.value,"onUpdate:show":o[1]||(o[1]=function(e){return d.value=e}),round:"",position:"bottom"},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",he,[Object(n["createElementVNode"])("div",{class:"title"},[Ne,Object(n["createElementVNode"])("div",{class:"right",onClick:j},"保存")]),Object(n["createElementVNode"])("div",Ee,[Ve,Object(n["createElementVNode"])("div",we,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.followList,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{class:Object(n["normalizeClass"])(["tag",{active:m.value.includes(e.value)}]),key:e.value,onClick:function(t){return O(e.value)}},Object(n["toDisplayString"])(e.text),11,Ce)})),128))])])])]})),_:1},8,["show"])])}}});c("5be3");Be.__scopeId="data-v-076926c5";var Se=Be,xe=c("ea6e"),Ie=c("75e6"),Te=c("dd03"),Fe=c("ea9b"),De=c("6c02"),_e=c("63bb"),Le=c.n(_e);Object(n["pushScopeId"])("data-v-3bea37de");var qe={key:0,class:"tip"},Ae=["src"],Me=Object(n["createElementVNode"])("span",null," 员工已提交结束跟进申请，请致电核实客户意向，若客户无意向，则通过复核线索关闭。 ",-1),Ze={key:1,class:"operate-bar"},Ue={class:"operate-icons"},ze=["src"],Je=Object(n["createElementVNode"])("span",null,"转发线索",-1),Re={key:2,class:"operate-bar"},Ke={key:0,class:"operate-icons"},We={key:1,class:"operate-icons"},Ye={key:2,class:"operate-icons"},Xe={class:"icon-item grey"},He=["src"],Pe=Object(n["createElementVNode"])("span",null,"结束跟进",-1),$e={class:"icon-item grey"},Qe=["src"],Ge=Object(n["createElementVNode"])("span",null,"新增房屋",-1),et={class:"icon-item grey"},tt=["src"],ct=Object(n["createElementVNode"])("span",null,"下意向单",-1),ot={class:"icon-item grey"},nt=["src"],rt=Object(n["createElementVNode"])("span",null,"添加跟进",-1),lt={key:4,class:"operate-icons"},at=["src"],it=Object(n["createElementVNode"])("span",null,"改派",-1),st=["src"],ut=Object(n["createElementVNode"])("span",null,"结束跟进",-1),dt=["src"],bt=Object(n["createElementVNode"])("span",null,"新增房屋",-1),mt=["src"],ft=Object(n["createElementVNode"])("span",null,"下意向单",-1),Ot=["src"],jt=Object(n["createElementVNode"])("span",null,"添加跟进",-1),pt={class:"approve"},vt={class:"content"},gt={class:"title"},yt={class:"subtitle"},kt={class:"btns"},ht={class:"approve"},Nt=Object(n["createElementVNode"])("div",{class:"content"},[Object(n["createElementVNode"])("div",{class:"title"},"提交成功"),Object(n["createElementVNode"])("div",{class:"subtitle center"},"是否将线索改派给其他人跟进？")],-1),Et={class:"btns"},Vt={class:"share"};Object(n["popScopeId"])();var wt=Object(n["defineComponent"])({props:{pageType:Number,referral:{type:Object,required:!0},role:{type:String,required:!0},houseInfoList:{type:Array,required:!0},customerId:{type:String,required:!0},customer:{type:Object,required:!0},loadData:{type:Function,required:!0},changeActiveTab:{type:Function,required:!0}},setup:function(e){var t=this,a=e,i=Object(De["e"])(),s=function(){return Object(o["b"])(t,void 0,void 0,(function(){var e=this;return Object(o["c"])(this,(function(t){return Ie["a"].confirm({message:"是否指派给自己?",confirmButtonText:"确定",closeOnClickOverlay:!0,className:"del-confirm-dialog"}).then((function(){return Object(o["b"])(e,void 0,void 0,(function(){var e;return Object(o["c"])(this,(function(t){switch(t.label){case 0:return[4,Object(Fe["a"])()];case 1:return e=t.sent(),[4,Object(r["b"])({type:0,customerIdList:[Number(a.customerId)],followerMobile:e.mobile,followerId:e.id,followerName:e.nickname})];case 2:return t.sent(),l["a"].success({message:"指派成功",duration:2e3}),a.loadData(),[2]}}))}))})).catch((function(){})),[2]}))}))},u=function(e){return Object(o["b"])(t,void 0,void 0,(function(){var t=this;return Object(o["c"])(this,(function(c){return Ie["a"].confirm({message:"是否"+(e?"":"暂不")+"跟进该客户?",confirmButtonText:"确定",closeOnClickOverlay:!0,className:"del-confirm-dialog"}).then((function(){return Object(o["b"])(t,void 0,void 0,(function(){return Object(o["c"])(this,(function(t){switch(t.label){case 0:return[4,Object(r["a"])({locked:e,id:a.referral.id})];case 1:return t.sent(),l["a"].success({message:(e?"跟进":"操作")+"成功",duration:1200}),a.loadData(),[2]}}))}))})).catch((function(){})),[2]}))}))},d=Object(n["ref"])(!1),b=Object(n["ref"])(0),m=Object(n["ref"])(""),f=function(e){console.log(a),d.value=!0,b.value=e,m.value=""},O=function(){return Object(o["b"])(t,void 0,void 0,(function(){return Object(o["c"])(this,(function(e){switch(e.label){case 0:return b.value||m.value?[4,Object(r["d"])({referralId:a.referral.id,description:m.value,dealResult:b.value})]:[2];case 1:return e.sent(),l["a"].success({message:"提交成功",duration:1200}),a.loadData(),a.changeActiveTab("follow"),d.value=!1,0===b.value&&(j.value=!0),[2]}}))}))},j=Object(n["ref"])(!1),p=function(){console.log("toQuotation"),Le.a.miniProgram.navigateTo({url:"/pages/EditAddress/index?isCreate=1"})},v=function(){var e=a.customer,t=e.cityCode,c=e.cityName,n=e.provinceCode,r=e.provinceName,l=a.houseInfoList.length;console.log(a.houseInfoList,l);var s=l?Object(o["d"])(Object(o["d"])([],a.houseInfoList),[{provinceCode:a.houseInfoList[l-1].provinceCode,provinceName:a.houseInfoList[l-1].provinceName,cityCode:a.houseInfoList[l-1].cityCode,cityName:a.houseInfoList[l-1].cityName,customerRole:0}]):[{provinceCode:n,provinceName:r,cityCode:t,cityName:c,customerRole:0}];sessionStorage.setItem("houseInfoList",JSON.stringify(s)),i.push({path:"/customerEditHouse",query:{pageType:"add",customerId:a.customerId,houseIndex:l}})},g=function(e){i.push({path:"/customerFormSubmit",query:{pageType:e,customerId:a.customerId,referralId:a.referral.id}})},y=function(e){void 0===e&&(e=!1),i.push({path:"/staffList",query:{customerId:a.customerId,type:e?1:void 0,followerId:e?a.referral.currentFollowerId:void 0}})},k=Object(n["ref"])(!1);return function(t,o){var r=Object(n["resolveComponent"])("van-field"),l=Object(n["resolveComponent"])("van-dialog");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[void 0!==e.customer.followFlag?(Object(n["openBlock"])(),Object(n["createBlock"])(Te["a"],{key:0,height:2===e.referral.status&&2===e.referral.locked&&["MJFZ_ZYKF","MJFZ_XMFZR"].includes(e.role)?"38vw":"19vw"},Object(n["createSlots"])({_:2},[!0===e.customer.followFlag?{name:"content",fn:Object(n["withCtx"])((function(){return[2===e.referral.status&&2===e.referral.locked&&["MJFZ_ZYKF","MJFZ_XMFZR"].includes(e.role)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",qe,[Object(n["createElementVNode"])("img",{src:c("6710"),alt:""},null,8,Ae),Me])):Object(n["createCommentVNode"])("",!0),0===e.pageType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ze,[Object(n["createElementVNode"])("div",Ue,[Object(n["createElementVNode"])("div",{class:"icon-item mr",onClick:o[0]||(o[0]=function(e){return k.value=!0})},[Object(n["createElementVNode"])("img",{class:"icon",src:c("88a9")},null,8,ze),Je]),1===e.referral.customerSource||["MJFZ_ZYKF"].includes(e.role)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:"icon-item btn white",onClick:o[1]||(o[1]=function(e){return y()})}," 指派给他人 ")):Object(n["createCommentVNode"])("",!0),1!==e.referral.customerSource&&["MJFZ_ZYKF"].includes(e.role)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:1,class:"icon-item btn green",onClick:o[2]||(o[2]=function(e){return s()})}," 指派给自己 ")):Object(n["createCommentVNode"])("",!0)])])):Object(n["createCommentVNode"])("",!0),1===e.pageType?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Re,[1===e.referral.status&&1===e.referral.locked&&e.referral.currentFollowerFlag?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ke,[Object(n["createElementVNode"])("div",{class:"icon-item btn white",onClick:o[3]||(o[3]=function(e){return u(0)})},"暂不跟进"),Object(n["createElementVNode"])("div",{class:"icon-item btn green",onClick:o[4]||(o[4]=function(e){return u(1)})},"同意跟进")])):2===e.referral.status&&2===e.referral.locked&&["MJFZ_ZYKF","MJFZ_XMFZR"].includes(e.role)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",We,[Object(n["createElementVNode"])("div",{class:"icon-item btn white",onClick:o[5]||(o[5]=function(e){return f(0)})},"复核不通过"),Object(n["createElementVNode"])("div",{class:"icon-item btn green",onClick:o[6]||(o[6]=function(e){return f(1)})},"复核通过")])):2!==e.referral.status||2!==e.referral.locked||["MJFZ_ZYKF","MJFZ_XMFZR"].includes(e.role)?["MJFZ_ZYKF","MJFZ_XMFZR"].includes(e.role)&&!e.referral.currentFollowerFlag?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:3,class:"icon-item btn green",onClick:o[7]||(o[7]=function(e){return y(!0)})}," 改派 ")):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",lt,[["MJFZ_ZYKF"].includes(e.role)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:"icon-item",onClick:o[8]||(o[8]=function(e){return y(!0)})},[Object(n["createElementVNode"])("img",{class:"icon",src:c("3e82")},null,8,at),it])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",{class:"icon-item",onClick:o[9]||(o[9]=function(e){return g("closeForwardRecord")})},[Object(n["createElementVNode"])("img",{class:"icon",src:c("9204")},null,8,st),ut]),Object(n["createElementVNode"])("div",{class:"icon-item",onClick:o[10]||(o[10]=function(e){return v()})},[Object(n["createElementVNode"])("img",{class:"icon",src:c("7aef")},null,8,dt),bt]),Object(n["createElementVNode"])("div",{class:"icon-item",onClick:o[11]||(o[11]=function(e){return p()})},[Object(n["createElementVNode"])("img",{class:"icon",src:c("6b56")},null,8,mt),ft]),Object(n["createElementVNode"])("div",{class:"icon-item",onClick:o[12]||(o[12]=function(e){return g("addForwardRecord")})},[Object(n["createElementVNode"])("img",{class:"icon",src:c("9e53")},null,8,Ot),jt])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ye,[Object(n["createElementVNode"])("div",Xe,[Object(n["createElementVNode"])("img",{class:"icon",src:c("7936")},null,8,He),Pe]),Object(n["createElementVNode"])("div",$e,[Object(n["createElementVNode"])("img",{class:"icon",src:c("3c04")},null,8,Qe),Ge]),Object(n["createElementVNode"])("div",et,[Object(n["createElementVNode"])("img",{class:"icon",src:c("9a64")},null,8,tt),ct]),Object(n["createElementVNode"])("div",ot,[Object(n["createElementVNode"])("img",{class:"icon",src:c("f46d")},null,8,nt),rt])]))])):Object(n["createCommentVNode"])("",!0)]}))}:{name:"content",fn:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",{class:"operate-bar"},[Object(n["createElementVNode"])("div",{class:"icon-item btn green",onClick:o[13]||(o[13]=function(e){return k.value=!0})},"转发线索")])]}))}]),1032,["height"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(l,{show:d.value,"onUpdate:show":o[16]||(o[16]=function(e){return d.value=e}),showConfirmButton:!1},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",pt,[Object(n["createElementVNode"])("div",vt,[Object(n["createElementVNode"])("div",gt,Object(n["toDisplayString"])("复核"+(b.value?"":"不")+"通过"),1),Object(n["createElementVNode"])("div",yt,Object(n["toDisplayString"])(b.value?"客户无购买意向，确认关闭线索，不再跟进":"客户有购买意向，请将此线索改派给其他员工跟进"),1),Object(n["createVNode"])(r,{modelValue:m.value,"onUpdate:modelValue":o[14]||(o[14]=function(e){return m.value=e}),modelModifiers:{trim:!0},label:"",placeholder:"请输入复核意见",rows:"2",autosize:"",type:"textarea",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),Object(n["createElementVNode"])("div",kt,[Object(n["createElementVNode"])("div",{class:"btn cancel",onClick:o[15]||(o[15]=function(e){return d.value=!1})},"取消"),Object(n["createElementVNode"])("div",{class:"btn confirm",onClick:O,style:Object(n["normalizeStyle"])("color: rgba(0, 0, 0, "+(b.value||m.value?"0.85":"0.3")+")")},Object(n["toDisplayString"])("确定"+(b.value?"":"复核不")+"通过"),5)])])]})),_:1},8,["show"]),Object(n["createVNode"])(l,{show:j.value,"onUpdate:show":o[19]||(o[19]=function(e){return j.value=e}),showConfirmButton:!1},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",ht,[Nt,Object(n["createElementVNode"])("div",Et,[Object(n["createElementVNode"])("div",{class:"btn cancel",onClick:o[17]||(o[17]=function(e){return j.value=!1})},"暂不"),Object(n["createElementVNode"])("div",{class:"btn confirm",onClick:o[18]||(o[18]=function(e){return y(!0)})},"立即改派")])])]})),_:1},8,["show"]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",Vt,[Object(n["createElementVNode"])("img",{src:"https://black-pearl.oss-cn-shenzhen.aliyuncs.com/2022/06/30/2e265593-2c6c-4540-9f15-d871d26b79b2.png",alt:"",onClick:o[20]||(o[20]=function(e){return k.value=!1})})],512),[[n["vShow"],k.value]])],64)}}});c("71ef");wt.__scopeId="data-v-3bea37de";var Ct=wt,Bt=c("5502");Object(n["pushScopeId"])("data-v-36805f43");var St={class:"tabs"},xt=["value","onClick"],It=Object(n["createElementVNode"])("div",{class:"dialog-content"},"请先确认是否同意跟进",-1);Object(n["popScopeId"])();var Tt=Object(n["defineComponent"])({setup:function(e){var t=this,c=Object(De["e"])(),l=Object(De["d"])(),a=Object(Bt["b"])(),i=Object(n["ref"])(Number(l.query.pageType)),s=[{text:"房屋信息",value:"house"},{text:"跟进记录",value:"follow"}],u=Object(n["ref"])(s),d=Object(n["ref"])("house"),b=Object(n["ref"])({id:"",userId:"",mobile:"",name:"",cityCode:"",customerTag:[],customerHouse:[],status:9,followFlag:void 0}),m=Object(n["ref"])([]),f=function(){return Object(o["b"])(t,void 0,void 0,(function(){var e;return Object(o["c"])(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Object(r["l"])(l.query.id,l.query.flag)];case 1:return e=t.sent(),b.value=e,m.value=null===e||void 0===e?void 0:e.customerHouse,[3,3];case 2:return t.sent(),setTimeout((function(){c.go(-1)}),2e3),[3,3];case 3:return[2]}}))}))},O=Object(n["ref"])([]),j=Object(n["ref"])({createdTime:"",customerSource:999,intentionDescription:"",intentionType:"",id:"",currentFollowerFlag:!0,locked:999,status:999}),p=function(){return Object(o["b"])(t,void 0,void 0,(function(){var e,t,c,n,a,d,b;return Object(o["c"])(this,(function(m){switch(m.label){case 0:return[4,Object(r["o"])(l.query.id)];case 1:return e=m.sent(),O.value=e,j.value=e[0],i.value=1===(null===(t=j.value)||void 0===t?void 0:t.status)&&0===(null===(c=j.value)||void 0===c?void 0:c.locked)?0:1===(null===(n=j.value)||void 0===n?void 0:n.status)&&1===(null===(a=j.value)||void 0===a?void 0:a.locked)||2===(null===(d=j.value)||void 0===d?void 0:d.status)?1:4===(null===(b=j.value)||void 0===b?void 0:b.status)?3:2,u.value=1===i.value?Object(o["d"])(Object(o["d"])([],s),[{text:"成交信息",value:"order"}]):s,V("followUpTag"+(j.value.intentionType||"")),[2]}}))}))},v=Object(n["ref"])([]),g=Object(n["ref"])({}),y=Object(n["ref"])([]),k=Object(n["ref"])({}),h=Object(n["ref"])([]),N=Object(n["ref"])(),E=function(){return Object(o["b"])(t,void 0,void 0,(function(){var e,t;return Object(o["c"])(this,(function(c){switch(c.label){case 0:return[4,Object(r["s"])()];case 1:return e=c.sent(),N.value=e,t=e.find((function(e){return"intentionLevel"===e.configCode})),t&&(g.value={configId:t.configId,businessType:2},y.value=t.commonConfigOptionVoList.map((function(e){return{text:e.optionValue,value:e.optionValue,desc:e.optionDesc}}))),[2]}}))}))},V=function(e){var t=N.value.find((function(t){return t.configCode===e}));t&&(k.value={configId:t.configId,businessType:2},h.value=t.commonConfigOptionVoList.map((function(e){return{text:e.optionValue,value:e.optionValue}})))},w=function(){return Object(o["b"])(t,void 0,void 0,(function(){var e;return Object(o["c"])(this,(function(t){switch(t.label){case 0:return[4,Object(r["u"])(l.query.id)];case 1:return e=t.sent(),v.value=e,v.value.forEach((function(e){e.fold=!1})),[2]}}))}))},C=function(){return Object(o["b"])(t,void 0,void 0,(function(){return Object(o["c"])(this,(function(e){switch(e.label){case 0:return[4,f()];case 1:return e.sent(),p(),w(),[2]}}))}))};E(),C();var B=function(e){return Object(o["b"])(t,void 0,void 0,(function(){var t;return Object(o["c"])(this,(function(c){switch(c.label){case 0:return V("followUpTag"+(e||"")),p(),t=v.value[0].followUpTagArray.filter((function(e){return h.value.find((function(t){return t.value===e}))})),t.length===v.value[0].followUpTagArray.length?[2]:[4,Object(r["x"])(Object(o["a"])({markValueArray:t,businessId:j.value.id},k.value))];case 1:return c.sent(),w(),[2]}}))}))},S=function(e){d.value=e};Object(n["watch"])((function(){return l.params.change}),(function(e){e&&(d.value=e)}),{deep:!0,immediate:!0});var x=Object(n["ref"])(!1);return console.log("当前地址",window.location.href),function(e,t){var c,o,r=Object(n["resolveComponent"])("van-dialog");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(R,{customer:b.value,referral:j.value,pageType:i.value,intentionConfig:g.value,intentionList:y.value,role:Object(n["unref"])(a).state.user.role,onShowWarn:t[0]||(t[0]=function(e){return x.value=!0}),onSuccess:p,onUpdateType:B},null,8,["customer","referral","pageType","intentionConfig","intentionList","role"]),Object(n["createElementVNode"])("div",St,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(u.value,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:Object(n["normalizeClass"])(["tab",{active:d.value===e.value}]),style:Object(n["normalizeStyle"])("width: "+(1===i.value?"33%":"50%")),key:e.value,value:e.value,onClick:function(t){return d.value=e.value}},Object(n["toDisplayString"])(e.text),15,xt)})),128))]),Object(n["withDirectives"])(Object(n["createVNode"])(K["a"],{pageType:i.value,list:m.value,role:Object(n["unref"])(a).state.user.role,followFlag:b.value.followFlag,customerId:String(Object(n["unref"])(l).query.id),referral:j.value,loadData:C,onShowWarn:t[1]||(t[1]=function(e){return x.value=!0})},null,8,["pageType","list","role","followFlag","customerId","referral"]),[[n["vShow"],"house"===d.value]]),Object(n["withDirectives"])(Object(n["createVNode"])(Se,{pageType:i.value,records:v.value,followConfig:k.value,followList:h.value,role:Object(n["unref"])(a).state.user.role,followFlag:b.value.followFlag,customerId:String(Object(n["unref"])(l).query.id),referral:j.value,onShowWarn:t[2]||(t[2]=function(e){return x.value=!0}),onSuccess:w},null,8,["pageType","records","followConfig","followList","role","followFlag","customerId","referral"]),[[n["vShow"],"follow"===d.value]]),Object(n["withDirectives"])(Object(n["createVNode"])(xe["a"],{customerId:1===i.value?String(Object(n["unref"])(l).query.id):"",customer:b.value,referral:j.value,showRelate:j.value.currentFollowerFlag&&!(1===(null===(c=j.value)||void 0===c?void 0:c.status)&&1===(null===(o=j.value)||void 0===o?void 0:o.locked))},null,8,["customerId","customer","referral","showRelate"]),[[n["vShow"],"order"===d.value]]),Object(n["createVNode"])(Ct,{pageType:i.value,referral:j.value,role:Object(n["unref"])(a).state.user.role,houseInfoList:m.value,customerId:String(Object(n["unref"])(l).query.id),customer:b.value,loadData:C,changeActiveTab:S},null,8,["pageType","referral","role","houseInfoList","customerId","customer"]),Object(n["createVNode"])(r,{show:x.value,"onUpdate:show":t[3]||(t[3]=function(e){return x.value=e}),title:"提示",confirmButtonText:"我知道了",confirmButtonColor:"#5D8AA3"},{default:Object(n["withCtx"])((function(){return[It]})),_:1},8,["show"])],64)}}});c("4aca");Tt.__scopeId="data-v-36805f43";t["default"]=Tt},d484:function(e,t,c){"use strict";c("a9e3");var o=c("9ab4"),n=c("7a23"),r=c("75e6"),l=c("626a"),a=c("ebef"),i=c("3d1b"),s=c("fab1"),u=c("6c02");Object(n["pushScopeId"])("data-v-6495f531");var d={key:0,class:"detail-house"},b={class:"card-title"},m=["src"],f={class:"card-detail"},O={class:"detail-item"},j=Object(n["createElementVNode"])("span",{class:"item-label"},"户型：",-1),p={class:"item-val"},v={class:"detail-item"},g=Object(n["createElementVNode"])("span",{class:"item-label"},"身份：",-1),y={class:"item-val"},k={key:0,class:"card-member"},h={class:"title"},N={class:"member-name"},E={class:"left"},V={class:"name"},w={class:"tag"},C=["onClick"],B={class:"member-mobile"},S=["src"],x={class:"middle"},I={key:1,class:"card-btns"};Object(n["popScopeId"])();var T=Object(n["defineComponent"])({props:{pageType:Number,list:{type:Array,required:!0},role:String,customerId:String,followFlag:{type:Boolean,default:!1},referral:{type:Object},loadData:{type:Function}},emits:["showWarn"],setup:function(e,t){var T=this,F=t.emit,D=e,_=Object(u["e"])(),L=function(){return!(!D.referral||1!==D.referral.status||1!==D.referral.locked)&&(F("showWarn"),!0)},q=function(e){L()||(sessionStorage.setItem("houseInfoList",JSON.stringify(D.list)),_.push({path:"/customerEditHouse",query:{pageType:"edit",customerId:D.customerId,houseIndex:e}}))},A=function(e,t){L()||_.push({path:"/customerEditMember",query:{houseCode:e,pageType:t}})},M=function(e,t){return Object(o["b"])(T,void 0,void 0,(function(){var c=this;return Object(o["c"])(this,(function(n){return console.log(e,t),r["a"].confirm({message:"是否删除该成员?",confirmButtonText:"确定",closeOnClickOverlay:!0,className:"del-confirm-dialog"}).then((function(){return Object(o["b"])(c,void 0,void 0,(function(){return Object(o["c"])(this,(function(c){switch(c.label){case 0:return[4,Object(a["g"])({customerId:e,houseCode:t})];case 1:return c.sent(),l["a"].success({message:"删除成功",duration:1200}),D.loadData&&D.loadData(),[2]}}))}))})).catch((function(){})),[2]}))}))};return function(t,o){var r=Object(n["resolveComponent"])("mj-button");return e.list.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",d,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.list,(function(t,o){var l,a;return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"house-card",key:t.buildingCode},[Object(n["createElementVNode"])("div",b,[Object(n["createElementVNode"])("img",{src:c("8617")},null,8,m),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(t.houseCode?t.houseName:t.provinceName+t.cityName+t.projectName+(null!==(l=t.houseName)&&void 0!==l?l:"")),1)]),Object(n["createElementVNode"])("div",f,[Object(n["createElementVNode"])("div",O,[j,Object(n["createElementVNode"])("span",p,Object(n["toDisplayString"])(t.houseType?t.houseType:"暂无信息"),1)]),Object(n["createElementVNode"])("div",v,[g,Object(n["createElementVNode"])("span",y,Object(n["toDisplayString"])(Object(n["unref"])(i["a"])[t.customerRole]),1)])]),t.memberList&&t.memberList.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",k,[Object(n["createElementVNode"])("div",h,"成员信息("+Object(n["toDisplayString"])(t.memberList.length)+")",1),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t.memberList,(function(o){var r;return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"member-item",key:o.customerId},[Object(n["createElementVNode"])("div",N,[Object(n["createElementVNode"])("div",E,[Object(n["createElementVNode"])("span",V,Object(n["toDisplayString"])(o.customerName),1),Object(n["createElementVNode"])("span",w,Object(n["toDisplayString"])(Object(n["unref"])(i["a"])[o.customerRole]),1)]),t.houseCode&&1===e.pageType&&!0===e.followFlag&&2!==(null===(r=e.referral)||void 0===r?void 0:r.locked)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:"right",onClick:function(e){return M(o.customerId,t.houseCode)}}," 删除 ",8,C)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",B,[Object(n["createElementVNode"])("img",{class:"icon",src:c("380d")},null,8,S),Object(n["createElementVNode"])("div",x,Object(n["toDisplayString"])(o.customerMobile),1)])])})),128))])):Object(n["createCommentVNode"])("",!0),1===e.pageType&&!0===e.followFlag&&2!==(null===(a=e.referral)||void 0===a?void 0:a.locked)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",I,[t.houseCode?(Object(n["openBlock"])(),Object(n["createBlock"])(r,{key:0,text:"添加成员",onClick:function(e){return A(t.houseCode,"add")}},null,8,["onClick"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(r,{text:"编辑",onClick:function(e){return q(o)}},null,8,["onClick"])])):Object(n["createCommentVNode"])("",!0)])})),128))])):(Object(n["openBlock"])(),Object(n["createBlock"])(s["a"],{key:1,text:"暂无房屋信息"}))}}});c("8cf8");T.__scopeId="data-v-6495f531";t["a"]=T},d95d:function(e,t,c){"use strict";c("d9ee")},d9ee:function(e,t,c){},dd03:function(e,t,c){"use strict";var o=c("7a23"),n=Object(o["defineComponent"])({props:{bgColor:{type:String,default:"#f9f9f9"},height:{type:String,default:"19vw"}},setup:function(e){return function(t,c){return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("div",{class:"handler save-area",style:Object(o["normalizeStyle"])("background: "+e.bgColor+";height: "+e.height)},null,4),Object(o["createElementVNode"])("div",{class:"bar save-area",style:Object(o["normalizeStyle"])("height: "+e.height)},[Object(o["renderSlot"])(t.$slots,"content")],4)],64)}}});c("5de2");n.__scopeId="data-v-f7cfe444";t["a"]=n},ea6e:function(e,t,c){"use strict";c("caad"),c("2532"),c("d81d"),c("a15b"),c("a630"),c("3ca3"),c("d3b7"),c("6062"),c("ddb0");var o=c("9ab4"),n=c("7a23"),r=c("6c02"),l=c("ebef"),a=c("ba24"),i=c("fab1"),s=c("63bb"),u=c.n(s);Object(n["pushScopeId"])("data-v-42ef2d0d");var d={class:"detail-order"},b={key:0,class:"relate"},m={class:"content"},f=Object(n["createElementVNode"])("span",{class:"text"},"更多订单可手动进行关联",-1),O={key:1,class:"order-container"};Object(n["popScopeId"])();var j=Object(n["defineComponent"])({props:{mobile:String,customerId:String,customer:{type:Object},referral:{type:Object},canFold:{type:Boolean,default:!1},showRelate:{type:Boolean,default:!1}},emits:["updateOrder"],setup:function(e,t){var c=this,s=t.emit,j=e,p=Object(r["e"])(),v=Object(n["ref"])([]);Object(n["watch"])((function(){return j.mobile}),(function(e){return Object(o["b"])(c,void 0,void 0,(function(){var t;return Object(o["c"])(this,(function(c){switch(c.label){case 0:return console.log("order mobile",e),!e||e.includes("*")?[2]:[4,Object(l["m"])({mobile:e,pageSize:100,page:1})];case 1:return t=c.sent(),v.value=t.records.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{category:Array.from(new Set(e.categoryList.map((function(e){return e.categoryName})))).join(",")})})),s("updateOrder",v.value.length),[2]}}))}))})),Object(n["watch"])((function(){return j.customerId}),(function(e){return Object(o["b"])(c,void 0,void 0,(function(){var t;return Object(o["c"])(this,(function(c){switch(c.label){case 0:return console.log("order customerId",e),e?[4,Object(l["p"])(e)]:[2];case 1:return t=c.sent(),v.value=t.records.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{orderCode:e.code,category:Array.from(new Set(e.orderItemVoList.map((function(e){return e.orderCategoryVo.categoryName})))).join(",")})})),[2]}}))}))}));var g=Object(n["ref"])(!1),y=function(){var e,t,c;p.push({path:"/relateOrderList",query:{referralId:null===(e=j.referral)||void 0===e?void 0:e.id,mobile:null===(t=j.customer)||void 0===t?void 0:t.mobile,source:null===(c=j.customer)||void 0===c?void 0:c.customerSource}})},k=function(e){console.log(e),u.a.miniProgram.navigateTo({url:"/pages/OrderDetail/index?id="+e+"&isOrder=1&status=1"})};return function(t,c){var o=Object(n["resolveComponent"])("mj-button");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",d,[e.showRelate?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",b,[Object(n["createElementVNode"])("div",m,[f,Object(n["createElementVNode"])("span",{class:"btn",onClick:c[0]||(c[0]=function(e){return y()})}," + 关联订单 ")])])):Object(n["createCommentVNode"])("",!0),v.value.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",O,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(v.value,(function(t,c){return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(a["a"],{key:t.orderCode,item:t},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(o,{onClick:function(e){return k(t.orderCode)}},null,8,["onClick"])]})),_:2},1032,["item"])),[[n["vShow"],!e.canFold||g.value||0===c]])})),128)),e.canFold&&v.value.length>1?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:"show-btn save-area",onClick:c[1]||(c[1]=function(e){return g.value=!g.value})},[Object(n["createElementVNode"])("span",{class:Object(n["normalizeClass"])([g.value?"fold-up":"fold-down"])},Object(n["toDisplayString"])((g.value?"收起":"查看")+"更多"),3)])):Object(n["createCommentVNode"])("",!0)])):(Object(n["openBlock"])(),Object(n["createBlock"])(i["a"],{key:2,text:"暂无成交信息"}))])}}});c("d95d");j.__scopeId="data-v-42ef2d0d";t["a"]=j},f46d:function(e,t,c){e.exports=c.p+"img/bar_forward_grey.0cff2bd4.svg"},f6e4:function(e,t,c){e.exports=c.p+"img/follow.33e9253b.svg"}}]);
//# sourceMappingURL=CustomerDetail.e7d5bd5c.js.map