{"version":3,"sources":["webpack:///./src/pages/Customer/formSubmit.vue?804e","webpack:///./src/pages/Customer/formSubmit.vue","webpack:///./src/pages/Customer/formSubmit.vue?9588","webpack:///./src/api/Customer.ts"],"names":["_pushScopeId","_hoisted_1","class","_hoisted_2","key","_popScopeId","_defineComponent","setup","__props","route","useRoute","router","useRouter","inputValue","ref","pageType","query","document","title","addForwardRecord","closeForwardRecord","valid","customerId","JSON","parse","showFollow","onSubmit","value","UpdateFollow","type","content","undefined","referralId","_a","Toast","success","setTimeout","go","appBox","getElementById","setAttribute","onBeforeRouteLeave","to","params","change","_ctx","_cache","_component_van_field","_resolveComponent","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_unref","_createCommentVNode","_createVNode","modelValue","$event","modelModifiers","trim","rows","autosize","maxlength","placeholder","autofocus","_normalizeClass","error","onClick","__exports__","getCustomerCityProvince","request","url","method","res","result","getIntentionList","saveReferralTag","data","saveFollowLabel","checkCustomerExist","saveHouseMember","deleteHouseMember","getCustomerOrder","getBindOrderList","getCustomerReferralOrder","pageSize","page","getCustomerPublicPage","records","getCustomerDetail","id","flag","getCustomerReferral","updateCustomerDetail","getReferralFollowRecord","AgreeFollow","AssignOrReassign","getExternalUser","externalUserId","getVisitor","saveVisitor","getCluesByMobile","mobile","getHouseByMobile","updateIntentionType","approveTerminate","referralBindOrder","getPaList","canFollowCounts","currentDeliveryPlanId","followingCounts"],"mappings":"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","file":"js/CustomerFormSubmit.11ab9fde.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./formSubmit.vue?vue&type=style&index=0&id=696e6f30&lang=scss&scoped=true\"","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, Fragment as _Fragment, withScopeId as _withScopeId, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\n_pushScopeId(\"data-v-696e6f30\")\nconst _hoisted_1 = { class: \"form-field-grey\" }\nconst _hoisted_2 = { key: 0 }\n_popScopeId()\n\nimport { onBeforeRouteLeave, useRoute, useRouter } from 'vue-router'\r\nimport { ref } from 'vue'\r\nimport { Toast } from 'vant'\r\nimport { UpdateFollow } from '@/api/Customer'\r\n\r\n\nexport default _defineComponent({\n  setup(__props) {\n\r\nconst route = useRoute()\r\nconst router = useRouter()\r\n\r\nconst inputValue = ref('')\r\n\r\n// 根据页面类型设置title\r\nconst pageType = route.query.pageType as string\r\ndocument.title = {\r\n  addForwardRecord: '添加跟进记录',\r\n  closeForwardRecord: '结束跟进原因',\r\n  valid: '填写无效原因'\r\n}[pageType] as string\r\n\r\nconst customerId = JSON.parse(route.query.customerId as string)\r\nlet showFollow = false //如果是添加跟进记录成功，返回后需要切换tab到跟进记录\r\n\r\nconst onSubmit = async () => {\r\n  if (inputValue.value) {\r\n    await UpdateFollow({\r\n      type: {\r\n        addForwardRecord: 2,\r\n        closeForwardRecord: 4,\r\n        valid: 1\r\n      }[pageType] as number,\r\n      customerId: customerId,\r\n      content: inputValue.value,\r\n      valid: pageType === 'valid' ? 0 : undefined,\r\n      referralId: route.query.referralId as string\r\n    })\r\n    Toast.success('操作成功')\r\n    if (pageType !== 'valid') {\r\n      showFollow = true\r\n    }\r\n    setTimeout(() => {\r\n      router.go(-1)\r\n    }, 2000)\r\n  }\r\n}\r\n\r\nconst appBox = document.getElementById('app')\r\nappBox && appBox.setAttribute('style', 'background:#ffffff')\r\nonBeforeRouteLeave(to => {\r\n  appBox && appBox.setAttribute('style', 'background:#f9f9f9')\r\n  to.params.change = showFollow ? 'follow' : 'house'\r\n})\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_van_field = _resolveComponent(\"van-field\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      (_unref(pageType) === 'closeForwardRecord')\n        ? (_openBlock(), _createElementBlock(\"p\", _hoisted_2, \" 提交结束跟进原因后，将由中央客服/操盘手复核你提交的的关闭线索 \"))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_component_van_field, {\n        modelValue: inputValue.value,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => (inputValue.value = $event)),\n        modelModifiers: { trim: true },\n        rows: \"2\",\n        autosize: \"\",\n        type: \"textarea\",\n        maxlength: \"50\",\n        placeholder: \"请输入\",\n        \"show-word-limit\": \"\",\n        autofocus: \"\"\n      }, null, 8, [\"modelValue\"])\n    ]),\n    _createElementVNode(\"div\", {\n      class: _normalizeClass([\"submit-btn success\", { success: inputValue.value, error: !inputValue.value }]),\n      onClick: onSubmit\n    }, \" 提交 \", 2)\n  ], 64))\n}\n}\n\n})","import script from \"./formSubmit.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./formSubmit.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./formSubmit.vue?vue&type=style&index=0&id=696e6f30&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/aleeeeex/Desktop/web3/Start-ups/nftgogo/front/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-696e6f30\"]])\n\nexport default __exports__","import request from '@/utils/request'\nimport * as url from './url'\n\n// 获取客户城市列表\nexport interface CityList {\n  code: string\n  name: string\n  cityList?: CityList[]\n}\nexport const getCustomerCityList = async () => {\n  const res = await request({\n    url: `${url.VUE_APP_DIANA_URL}/resource/line/city`,\n    method: 'get'\n  })\n  return res.result as CityList[]\n}\nexport const getCustomerCityProvince = async () => {\n  const res = await request({\n    url: `${url.VUE_APP_DIANA_URL}/resource/line/cityWithProvince`,\n    method: 'get'\n  })\n  return res.result as CityList[]\n}\nexport const getIntentionList = async () => {\n  const res = await request({\n    url: `${url.VUE_APP_DIANA_URL}/api/commonConfig/list/configOption/referral`,\n    method: 'get'\n  })\n  return res.result\n}\nexport const saveReferralTag = async (data: Object) => {\n  return await request({\n    url: `${url.VUE_APP_DIANA_URL}/referral/tag/saveReferralTag`,\n    method: 'post',\n    data\n  })\n}\nexport const saveFollowLabel = async (data: Object) => {\n  return await request({\n    url: `${url.VUE_APP_DIANA_URL}/referral/tag/saveFollowLabel`,\n    method: 'post',\n    data\n  })\n}\nexport const checkCustomerExist = async (data: Object) => {\n  const res = await request({\n    url: `${url.VUE_APP_DIANA_URL}/customer/checkCustomerExist`,\n    method: 'post',\n    data\n  })\n  return res.result\n}\nexport const saveHouseMember = async (data: Object) => {\n  return await request({\n    url: `${url.VUE_APP_DIANA_URL}/customer/saveHouseMember`,\n    method: 'post',\n    data\n  })\n}\nexport const deleteHouseMember = async (params: Object) => {\n  return await request({\n    url: `${url.VUE_APP_DIANA_URL}/customer/deleteHouseMember`,\n    method: 'get',\n    params\n  })\n}\n// 订单，工具栏访客页\nexport const getCustomerOrder = async (params: Object) => {\n  const res = await request({\n    url: `${url.VUE_APP_BLACKSAM_URL}/admin/order/customerSystem/list`,\n    method: 'get',\n    params\n  })\n  return res.result\n}\n// 订单，线索关联订单\nexport const getBindOrderList = async (params: Object) => {\n  const res = await request({\n    // url: `http://10.39.68.64:8085/referral/pageOtherBindOrder`,\n    url: `${url.VUE_APP_DIANA_URL}/referral/pageOtherBindOrder`,\n    method: 'get',\n    // params: { referralId: '263778', mobile: '15996255019' }\n    params\n  })\n  return res.result\n}\n// 订单，客户详情页\nexport const getCustomerReferralOrder = async (customerId: string) => {\n  const res = await request({\n    url: `${url.VUE_APP_DIANA_URL}/api/referral/customerReferralOrderPage`,\n    method: 'get',\n    params: { customerId: customerId, pageSize: 100, page: 1 }\n  })\n  return res.result\n}\nexport const getReferralOrder = async (referralId: string) => {\n  const res = await request({\n    url: `${url.VUE_APP_DIANA_URL}/api/referral/referralOrderPage`,\n    method: 'get',\n    params: { referralId, pageSize: 100, page: 1 }\n  })\n  return res.result\n}\n\n// 获取客户分页数据\nexport interface CustomerlHistory {\n  belongProject: string\n  cityCode: string\n  cityName: string\n  id: number\n  referralId: number\n  name: string\n  customerSource: string | number\n  referralTime: string\n  mobile?: string\n}\nexport interface CustomerlHistoryList {\n  records: CustomerlHistory[]\n  current: number\n  pages: number\n}\nexport const getCustomerPublicPage = async (params: Object) => {\n  const res = await request({\n    url: `${url.VUE_APP_DIANA_URL}/api/customer/page`,\n    method: 'get',\n    params\n  })\n  const records: CustomerlHistoryList = res?.result\n  return records\n}\n\n// 获取客户详情数据\nexport interface HouseInfoType {\n  provinceCode: string\n  provinceName: string\n  cityCode: string\n  cityName: string\n  projectCode: string\n  projectName: string\n  buildingCode: string\n  buildingName: string\n  houseCode: string\n  houseName: string\n  customerRole: number\n  houseType: string\n  memberList: { [x: string]: string }[]\n}\nexport interface CustomerDetailType {\n  id: string\n  userId: string\n  mobile: string\n  name: string\n  cityCode: string\n  customerTag: string[]\n  customerHouse: HouseInfoType[]\n  status: number\n  followFlag: boolean | undefined\n}\nexport const getCustomerDetail = async (id: string, flag: string) => {\n  const res = await request({\n    url: `${url.VUE_APP_DIANA_URL}/customer/${id}`,\n    method: 'get',\n    params: { flag }\n  })\n  const result: CustomerDetailType = res?.result\n  return result\n}\n\n// 获取客户转介数据\nexport interface CustomerReferralType {\n  createdTime: string\n  customerSource: number\n  id: string\n  intentionDescription: string\n  intentionType: string\n  currentFollowerFlag: boolean\n  status: number\n  locked: number\n}\nexport const getCustomerReferral = async (id: string) => {\n  const res = await request({\n    url: `${url.VUE_APP_DIANA_URL}/referral/${id}`,\n    method: 'get'\n  })\n  const result: CustomerReferralType[] = res?.result\n  return result\n}\n\n// 更新客户房屋信息\ninterface UpdateCustomerDetailType {\n  houseList: HouseInfoType[]\n  customerId: number | string\n}\nexport const updateCustomerDetail = async (data: UpdateCustomerDetailType) => {\n  return await request({\n    url: `${url.VUE_APP_DIANA_URL}/customer`,\n    method: 'put',\n    data\n  })\n}\n\n// 获取客户跟进记录\nexport interface RecordInfoType {\n  recordId: number\n  content: string\n  createdTime: string\n  followerMobile: string\n  followerName: string\n  orderInfo: {\n    categoryName: string\n    code: string\n    createdTime: string\n    finishPaidTime: string\n  }\n}\nexport interface FollowRecordType {\n  recordList: RecordInfoType[]\n  id: number\n  status: number\n  followerName: string\n  followerMobile: string\n  show: boolean\n  fold: boolean\n  followUpTagArray: string[]\n}\nexport const getReferralFollowRecord = async (customerId: string) => {\n  const res = await request({\n    url: `${url.VUE_APP_DIANA_URL}/referralFollowRecord/${customerId}`,\n    method: 'get'\n  })\n  const result: FollowRecordType[] = res?.result\n  return result\n}\n\n// 确认客户是否有效、添加跟进记录、延期、结束客户跟进\ninterface UpdateFollowType {\n  type: number\n  customerId?: number\n  referralId?: number | string\n  valid?: number\n  content?: string\n}\nexport const UpdateFollow = async (data: UpdateFollowType) => {\n  return await request({\n    url: `${url.VUE_APP_DIANA_URL}/referral`,\n    method: 'put',\n    data\n  })\n}\n// 是否同意跟进\nexport const AgreeFollow = async (data: object) => {\n  return await request({\n    url: `${url.VUE_APP_DIANA_URL}/referral/agreeFollowOrNot`,\n    method: 'post',\n    data\n  })\n}\n// 批量指派、改派\ninterface AssignOrReassignType {\n  type: number\n  customerIdList: number[]\n  followerMobile: string\n  followerId: number\n  deliveryPlanId?: number\n  followerName?: string\n}\nexport const AssignOrReassign = async (data: AssignOrReassignType) => {\n  return await request({\n    url: `${url.VUE_APP_DIANA_URL}/referral/assignOrReassign`,\n    method: 'put',\n    data\n  })\n}\n\n/* 访客 */\n// 企微外部联系人信息\nexport const getExternalUser = async (externalUserId: string) => {\n  const res = await request({\n    url: `${url.VUE_APP_DIANA_URL}/qyWeixin/getExternalUser`,\n    method: 'get',\n    params: { externalUserId }\n  })\n  return res.result\n}\n\n// 查询访客\nexport const getVisitor = async (externalUserId: string) => {\n  const res = await request({\n    url: `${url.VUE_APP_DIANA_URL}/api/visitor/getVisitor`,\n    method: 'get',\n    params: { externalUserId }\n  })\n  return res.result\n}\n\n// 保存访客\nexport const saveVisitor = async (data: Object) => {\n  return await request({\n    url: `${url.VUE_APP_DIANA_URL}/api/visitor/saveVisitor`,\n    method: 'post',\n    data\n  })\n}\n\n// 手机号查询线索\nexport const getCluesByMobile = async (mobile: string) => {\n  const res = await request({\n    url: `${url.VUE_APP_DIANA_URL}/api/visitor/getReferralList`,\n    method: 'get',\n    params: { mobile }\n  })\n  return res.result\n}\n\n// 手机号查询房屋\nexport const getHouseByMobile = async (mobile: string) => {\n  const res = await request({\n    url: `${url.VUE_APP_DIANA_URL}/api/visitor/getHouseList`,\n    method: 'get',\n    params: { mobile }\n  })\n  return res.result\n}\n\n// 修改客户意向类型\nexport const updateIntentionType = async (data: Object) => {\n  return await request({\n    url: `${url.VUE_APP_DIANA_URL}/api/referral/updateIntentionType`,\n    method: 'post',\n    data\n  })\n}\n\n// 结束跟进复核\nexport const approveTerminate = async (data: Object) => {\n  return await request({\n    url: `${url.VUE_APP_DIANA_URL}/referral/terminateApprove`,\n    method: 'post',\n    data\n  })\n}\n\n// 转介绑定订单\nexport const referralBindOrder = async (data: Object) => {\n  return await request({\n    url: `${url.VUE_APP_DIANA_URL}/api/referral/bindOrder`,\n    method: 'post',\n    data\n  })\n}\n/* 被指派员工PA列表 */\nexport const getPaList = async (customerId: number, params: object) => {\n  const res = await request({\n    url: `${url.VUE_APP_DIANA_URL}/api/referral/assign/pa/list/${customerId}`,\n    method: 'get',\n    params\n  })\n  return res.result\n}\nexport interface IDASHBOARD {\n  totalCounts: string\n  warningCounts: number\n}\n/* dashbord可跟进客户统计—公池*/\nexport const canFollowCounts = async (currentDeliveryPlanId: string) => {\n  const res = await request({\n    url: `${url.VUE_APP_DIANA_URL}/api/referral/counts/canFollowCounts`,\n    method: 'GET',\n    params: {\n      currentDeliveryPlanId\n    }\n  })\n  const result: IDASHBOARD = res?.result\n  return result\n}\n\n/* dashbord跟进中客户统计—公池*/\nexport const followingCounts = async (currentDeliveryPlanId: string) => {\n  const res = await request({\n    url: `${url.VUE_APP_DIANA_URL}/api/referral/counts/followingCounts`,\n    method: 'GET',\n    params: {\n      currentDeliveryPlanId\n    }\n  })\n  const result: IDASHBOARD = res?.result\n  return result\n}\n"],"sourceRoot":""}